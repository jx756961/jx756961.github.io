<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>微信小程序初始化、前后台切换生命周期顺序</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
<h2 style="text-align: center">微信小程序初始化、前后台切换生命周期顺序</h2>
  <div class="stackedit__html"><ol>
<li>下面有三个文件  app.js 、index.js 、app.json</li>
</ol>
<pre><code class="prism language-javascript">	<span class="token comment">//app.js</span>
	<span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	  onLaunch<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"app.js ---onLaunch---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  onShow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"app.js ---onShow---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  onHide<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"app.js ---onHide---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"app.js ---onError---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  globalData<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	    userInfo<span class="token punctuation">:</span> <span class="token keyword">null</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<pre><code class="prism language-javascript">	<span class="token comment">//index.js</span>
	<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	  <span class="token comment">/**
	   * 页面的初始数据
	   */</span>
	  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	    
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 生命周期函数--监听页面加载
	   */</span>
	  onLoad<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onLoad---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 生命周期函数--监听页面初次渲染完成
	   */</span>
	  onReady<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onReady---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 生命周期函数--监听页面显示
	   */</span>
	  onShow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onShow---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 生命周期函数--监听页面隐藏
	   */</span>
	  onHide<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onHide---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 生命周期函数--监听页面卸载
	   */</span>
	  onUnload<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onUnload---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 页面相关事件处理函数--监听用户下拉动作
	   */</span>
	  onPullDownRefresh<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onPullDownRefresh---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 页面上拉触底事件的处理函数
	   */</span>
	  onReachBottom<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onReachBottom---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	  <span class="token comment">/**
	   * 用户点击右上角分享
	   */</span>
	  onShareAppMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"index.js ---onShareAppMessage---"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<pre><code class="prism language-json">	<span class="token comment">//app.json</span>
	<span class="token punctuation">{</span>
	  <span class="token string">"pages"</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
	    <span class="token string">"pages/index/index"</span>
	  <span class="token punctuation">]</span><span class="token punctuation">,</span>
	  <span class="token string">"window"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
	    <span class="token string">"backgroundTextStyle"</span><span class="token punctuation">:</span><span class="token string">"light"</span><span class="token punctuation">,</span>
	    <span class="token string">"navigationBarBackgroundColor"</span><span class="token punctuation">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>
	    <span class="token string">"navigationBarTitleText"</span><span class="token punctuation">:</span> <span class="token string">"WeChat"</span><span class="token punctuation">,</span>
	    <span class="token string">"navigationBarTextStyle"</span><span class="token punctuation">:</span><span class="token string">"black"</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

</code></pre>
<ol start="2">
<li>页面加载时console输出生命周期的状态</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/2019031914363883.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MDQzOTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<ol start="3">
<li>切后台时控制台输出生命周期状态<br>
<img src="https://img-blog.csdnimg.cn/20190319144013681.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MDQzOTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
<li>切回前台生命周期状态<img src="https://img-blog.csdnimg.cn/20190319144158565.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MDQzOTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ol>
</div>
</body>

</html>
