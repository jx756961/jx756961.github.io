<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mysql如何使用having筛选结果集</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
<h2 style="text-align: center">mysql如何使用having筛选结果集</h2>
  <div class="stackedit__html"><blockquote>
<p><code>mysql</code>的数据通过<code>WHERE</code>查询只能操作<code>mysql</code>数据库存储上的<code>sql</code>数据。当查询结果本身是筛选过的<code>结果集</code>,那么我们就不能用<code>where</code>继续操作结果集上的一些<code>别名查询</code></p>
</blockquote>
<p>所以<code>mysql</code> 有一个处理结果集的关键字 <code>having</code> 继续处理结果集数据<br>
如下goods表,我想知道我们店铺手机销售价比市场价低多少? 并且把差价在400以上的数据查询出来</p>
<pre><code class="prism language-sql">	<span class="token operator">|</span>   gid	  <span class="token operator">|</span> g_name	<span class="token operator">|</span>shop_price<span class="token operator">|</span>market_price<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|</span>
	<span class="token operator">|</span>    <span class="token number">1</span>    <span class="token operator">|</span> 三星<span class="token number">2019</span> <span class="token operator">|</span>	<span class="token number">11112</span>  <span class="token operator">|</span>   <span class="token number">12111</span>	<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|</span>
	<span class="token operator">|</span>    <span class="token number">2</span>    <span class="token operator">|</span>  ipone8 <span class="token operator">|</span>	<span class="token number">6668</span>   <span class="token operator">|</span>   <span class="token number">6999</span>		<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|</span>
	<span class="token operator">|</span>    <span class="token number">3</span>    <span class="token operator">|</span> 华为Note <span class="token operator">|</span>	<span class="token number">6666</span>   <span class="token operator">|</span>   <span class="token number">7100</span>		<span class="token operator">|</span>
</code></pre>
<ol>
<li>普通查询方式</li>
</ol>
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> gid<span class="token punctuation">,</span>g_name<span class="token punctuation">,</span>market_price<span class="token punctuation">,</span>shop_price<span class="token punctuation">,</span>market_price<span class="token operator">-</span>shop_price <span class="token keyword">FROM</span> goods <span class="token keyword">WHERE</span> market_price<span class="token operator">-</span>shop_price<span class="token operator">&gt;</span><span class="token number">400</span>
</code></pre>
<pre><code class="prism language-sql">	<span class="token operator">|</span>   gid	  <span class="token operator">|</span> g_name	<span class="token operator">|</span>shop_price<span class="token operator">|</span>market_price<span class="token operator">|</span>market_price<span class="token operator">-</span>shop_price<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|-----------------------|</span>
	<span class="token operator">|</span>    <span class="token number">1</span>    <span class="token operator">|</span> 三星<span class="token number">2019</span> <span class="token operator">|</span>	<span class="token number">11112</span>  <span class="token operator">|</span>   <span class="token number">12111</span>	<span class="token operator">|</span>		<span class="token number">999</span>				<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|-----------------------|	</span>
	<span class="token operator">|</span>    <span class="token number">3</span>    <span class="token operator">|</span> 华为Note <span class="token operator">|</span>	<span class="token number">6666</span>   <span class="token operator">|</span>   <span class="token number">7100</span>		<span class="token operator">|</span>		<span class="token number">434</span>				<span class="token operator">|</span>

</code></pre>
<p>如果我们不想二次使用这种长字段的方式查询数据</p>
<ol start="2">
<li>用<code>having</code> 来筛选结果集</li>
</ol>
<p>注：如果语句中使用<code>WHERE</code>要把<code>having</code>放在<code>WHERE</code>后面</p>
<pre><code class="prism language-sql">	<span class="token keyword">SELECT</span> gid<span class="token punctuation">,</span>g_name<span class="token punctuation">,</span>market_price<span class="token punctuation">,</span>shop_price<span class="token punctuation">,</span><span class="token punctuation">(</span>market_price<span class="token operator">-</span>shop_price<span class="token punctuation">)</span> <span class="token keyword">as</span> diff <span class="token keyword">FROM</span>  <span class="token punctuation">`</span>collector_v<span class="token punctuation">`</span>  <span class="token keyword">having</span> diff<span class="token operator">&gt;</span><span class="token number">400</span>
</code></pre>
<p>查询结果如下：</p>
<pre><code class="prism language-sql">	<span class="token operator">|</span>   gid	  <span class="token operator">|</span> g_name	<span class="token operator">|</span>shop_price<span class="token operator">|</span>market_price<span class="token operator">|</span>		diff 			<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|-----------------------|</span>
	<span class="token operator">|</span>    <span class="token number">1</span>    <span class="token operator">|</span> 三星<span class="token number">2019</span> <span class="token operator">|</span>	<span class="token number">11112</span>  <span class="token operator">|</span>   <span class="token number">12111</span>	<span class="token operator">|</span>		<span class="token number">999</span>				<span class="token operator">|</span>
	<span class="token operator">|</span><span class="token comment">---------|-------- |----------|------------|-----------------------|	</span>
	<span class="token operator">|</span>    <span class="token number">3</span>    <span class="token operator">|</span> 华为Note <span class="token operator">|</span>	<span class="token number">6666</span>   <span class="token operator">|</span>   <span class="token number">7100</span>		<span class="token operator">|</span>		<span class="token number">434</span>				<span class="token operator">|</span>

</code></pre>
</div>
</body>

</html>
