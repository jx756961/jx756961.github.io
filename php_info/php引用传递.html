<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>php引用传递</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
<h2 style="text-align: center">php引用传递</h2>
  <div class="stackedit__html"><p><strong>引用传递：将一个变量通过引用传递给函数，这样该函数就可以修改其参数的值。被调函数的形式参数虽然也作为局部变量在堆栈中开辟了内存空间，但是这时存放的是由主调函数放进来的实参变量的地址</strong><br>
注：在函数调用时没有引用符号——只有函数定义中有。</p>
<blockquote>
<p>主要是实参和形参的相互影响性。引用传递：形参的改变会影响实参 , 值传递：赋值，不相互影响 。 按照按值传递的做法来传值时，如果需要原来的值发生改变，则需要在进行代码复制，若是值够大或者是一大串字符串时，会使代码比较多，重复，而引用传递则不需要复制PHP代码，对提高性能这一个方面有很大的优势。</p>
</blockquote>
<pre><code class="prism language-php">	<span class="token keyword">function</span> <span class="token function">adduce</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$string</span><span class="token punctuation">)</span> <span class="token comment">// 引入变量，使用同一个存储地址</span>
	<span class="token punctuation">{</span>
	    <span class="token variable">$string</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token single-quoted-string string">'我是引用传递.'</span><span class="token punctuation">;</span>
	    <span class="token keyword">echo</span> <span class="token variable">$string</span><span class="token punctuation">;</span><span class="token comment">// 输出 '我是外部字符串, 我是引用传递.'</span>
	<span class="token punctuation">}</span>
	
	<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'我是外部字符串, '</span><span class="token punctuation">;</span>
	<span class="token function">adduce</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token variable">$str</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 '我是外部字符串, 我是引用传递.'</span>
</code></pre>
<ul>
<li><code>$str</code>输出:
<ul>
<li>我是外部字符串, 我是引用传递.</li>
</ul>
</li>
<li><code>$string</code>输出:
<ul>
<li>我是外部字符串, 我是引用传递.</li>
</ul>
</li>
</ul>
<p>以上示例证明 <code>$str</code>更改了地址。新地址与 <code>$string</code> 共用同一值</p>
<p>如果没有这个<code>&amp;</code>符号,请看示例</p>
<pre><code class="prism language-php">	<span class="token keyword">function</span> <span class="token function">adduce2</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
	    <span class="token variable">$string</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token single-quoted-string string">'内部字符串.'</span><span class="token punctuation">;</span>
	    <span class="token keyword">echo</span> <span class="token variable">$string</span><span class="token punctuation">;</span><span class="token comment">// 输出 '我是外部字符串, 我是引用传递.'</span>
	<span class="token punctuation">}</span>
	
	<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'外部字符串, '</span><span class="token punctuation">;</span>
	<span class="token function">adduce2</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token variable">$str</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 '外部字符串, '</span>
	
</code></pre>
<ul>
<li><code>$str</code>输出:
<ul>
<li>外部字符串,</li>
</ul>
</li>
<li><code>$string</code>输出:
<ul>
<li>我是外部字符串, 我是引用传递.</li>
</ul>
</li>
</ul>
<p>以上示例证明 <code>$str</code>内容不变。与 <code>$string</code> 互不影响</p>
<p><strong>函数的引用传递</strong></p>
<pre><code class="prism language-php">	<span class="token comment">//示例1</span>
	<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token operator">&amp;</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token keyword">return</span> <span class="token variable">$a</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 这里不是函数引用传递</span>
	<span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token double-quoted-string string">"a: <span class="token interpolation"><span class="token variable">$a</span></span>, b: <span class="token interpolation"><span class="token variable">$b</span></span>, c: <span class="token interpolation"><span class="token variable">$c</span></span>. &lt;br /&gt;"</span><span class="token punctuation">;</span><span class="token comment">//输出a: 1, b: 2, c: 1.   可见对$b的修改不会影响$a</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
	<span class="token comment">//示例2</span>
	<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token operator">&amp;</span><span class="token function">adduce</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token keyword">return</span> <span class="token variable">$a</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token variable">$c</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token function">adduce</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 这是函数引用传递,$c和$a引用同一个值</span>
	<span class="token variable">$c</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token double-quoted-string string">"a: <span class="token interpolation"><span class="token variable">$a</span></span>, b: <span class="token interpolation"><span class="token variable">$b</span></span>, c: <span class="token interpolation"><span class="token variable">$c</span></span>. &lt;br /&gt;"</span><span class="token punctuation">;</span><span class="token comment">//输出a: 3, b: 2, c: 3.   可见对$c的修改会影响$a</span>
</code></pre>
</div>
</body>

</html>
