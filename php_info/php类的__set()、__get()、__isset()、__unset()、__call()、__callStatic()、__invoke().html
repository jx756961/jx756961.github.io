<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>php类的__set()、__get()、__isset()、__unset()、__call()、__callStatic()、__invoke()</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">

<h2 style="text-align: center">php类的__set()、__get()、__isset()、__unset()、__call()、__callStatic()、__invoke()</h2>
  <div class="stackedit__html"><h5><a id="1__set__get__0"></a>1.__set()、__get() 应用</h5>
<blockquote>
<p>通过类中定义__set()、__get()魔术方法可以避免多个成员变量重复去定义get、set方法。</p>
</blockquote>
<ul>
<li>使用原理当外部设置 <mark>$UserAppIndex-&gt;username=‘华山论剑’;</mark> 时调用 __set() 。</li>
<li>当 <mark>$UserAppIndex-&gt;username;</mark> 时调用__get()方法</li>
</ul>
<p>注：这些魔术方法的参数都不能通过<a href="https://blog.csdn.net/qq_39043923/article/details/88812707">引用传递</a>。重载方法都必须被声明为 public。</p>
<pre><code class="prism language-php">
	<span class="token comment">//定义</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span>
	<span class="token punctuation">{</span>
	    <span class="token keyword">private</span> <span class="token variable">$username</span><span class="token operator">=</span><span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
		<span class="token keyword">private</span> <span class="token variable">$password</span><span class="token operator">=</span><span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
		
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__set</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token variable">$name</span><span class="token operator">=</span><span class="token variable">$value</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__get</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token variable">$name</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'这是 UserApp\Index'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//调用</span>
	<span class="token variable">$UserAppIndex</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$UserAppIndex</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">username</span><span class="token operator">=</span><span class="token single-quoted-string string">'华山论剑'</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token variable">$UserAppIndex</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">username</span><span class="token punctuation">;</span>
	
</code></pre>
<h5><a id="2___isset____unset_36"></a>2. __isset() 和 __unset()</h5>
<blockquote>
<p>5.1.0	新增 __isset() 和 __unset()</p>
</blockquote>
<p>当类中成员变量不能外部访问,会自动调用 __isset()方法,这样可以直接在魔术方法中判断成员变量是否存在,<br>
同样,你想删除成员变量会调用__unset()执行删除操作</p>
<pre><code class="prism language-php">	<span class="token comment">//定义</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span>
	<span class="token punctuation">{</span>
	    <span class="token keyword">private</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	    <span class="token keyword">private</span> <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__isset</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">return</span> <span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__unset</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	         <span class="token function">unset</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'这是 UserApp\Index'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//调用</span>
	<span class="token variable">$UserAppIndex</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$UserAppIndex</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">username</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">unset</span><span class="token punctuation">(</span><span class="token variable">$UserAppIndex</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">password</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre>
<h5><a id="3__call__callStatic_69"></a>3.__call()、__callStatic()</h5>
<p>当调用方法不存在时避免产生错误类会自动调用__call()。<br>
一样当静态方法不存在避免错误类自动调用__callStatic() ,__callStatic()必须为静态方法</p>
<pre><code class="prism language-php">
	<span class="token comment">//定义</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span>
	<span class="token punctuation">{</span>
	    <span class="token keyword">private</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	    <span class="token keyword">private</span> <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__call</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$arguments</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'您调用的函数'</span><span class="token punctuation">.</span><span class="token variable">$name</span><span class="token punctuation">.</span> <span class="token single-quoted-string string">'不存在,'</span> <span class="token punctuation">.</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$arguments</span><span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token single-quoted-string string">'为函数的参数'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">__callStatic</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$arguments</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'静态方法'</span><span class="token punctuation">.</span><span class="token variable">$name</span><span class="token punctuation">.</span> <span class="token single-quoted-string string">'不存在,'</span> <span class="token punctuation">.</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$arguments</span><span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token single-quoted-string string">'为函数的参数'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
		
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'这是 UserApp\Index'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//调用,下面调用直接输出</span>
	<span class="token variable">$UserAppIndex</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$UserAppIndex</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//您调用的函数go不存在,[]为函数的参数</span>
	<span class="token variable">$UserAppIndex</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//静态方法to不存在,[]为函数的参数</span>
	
</code></pre>
<h5><a id="4__invoke_100"></a>4.__invoke()</h5>
<p>当把对象当函数使用时候,自动调用__invoke() 下面示例说明</p>
<pre><code class="prism language-php">	<span class="token comment">//定义</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span>
	<span class="token punctuation">{</span>
	    <span class="token keyword">private</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	    <span class="token keyword">private</span> <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token variable">$arguments</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'该函数的参数为:'</span><span class="token punctuation">.</span><span class="token variable">$arguments</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'这是 UserApp\Index'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//调用</span>
	<span class="token variable">$UserAppIndex</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token variable">$UserAppIndex</span><span class="token punctuation">(</span><span class="token number">123123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//该函数的参数为:123123</span>
	
</code></pre>
<h5><a id="5__toString_124"></a>5.__toString()</h5>
<p>这个方法可以用来测试,用echo、print</p>
<pre><code class="prism language-php">	<span class="token comment">//定义</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span>
	<span class="token punctuation">{</span>
	    <span class="token keyword">private</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	    <span class="token keyword">private</span> <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">;</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">return</span> <span class="token single-quoted-string string">'我是tostring方法'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	
	    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    <span class="token punctuation">{</span>
	        <span class="token keyword">echo</span> <span class="token single-quoted-string string">'这是 UserApp\Index'</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//调用</span>
	<span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$UserAppIndex</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre>
<h5><a id="6__cloneurl_147"></a>6.__clone()的使用方法<a href="url">点击查看</a></h5>
</div>
</body>

</html>
