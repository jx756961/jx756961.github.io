<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Node.js学习 （十三）package.json、package-lock.json 最通俗的理解</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
<h2 style="text-align: center">Node.js学习 （十三）package.json、package-lock.json 最通俗的理解</h2>
  <div class="stackedit__html"><p>注意： <code>npm v5</code> 以后版本安装包可以不加 <code>--save</code> ,它会自动在<code>package.json</code> 中的 <code>dependencies</code> 保存依赖信息</p>
<h5><a id="packagejson_1"></a>package.json</h5>
<ul>
<li><code>express": "^4.16.2"</code> 这个 <code>^</code> 符号就是代表版本<br>
对于开发者来说最有价值就是 <code>dependencies</code> ,可以用来帮我们保存第三方包的依赖信息。如果你的<code>node-modules</code> 删除了也不用担心,我们只需要 <code>npm install</code>  就会把 <code>package.json</code> 中 所有 <code>dependencies</code> 依赖项都下载回来。</li>
</ul>
<ul>
<li>所以建议每个项目的根目录都有<code>package.json</code> 文件</li>
<li>建议执行 <code>npm install 包名</code> 的时候都加上 <code>--save</code> 这个选项, 目的就是为了保存依赖项信息</li>
</ul>
<pre><code class="prism language-json"><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"art-template"</span><span class="token punctuation">:</span> <span class="token string">"^4.12.2"</span><span class="token punctuation">,</span>
    <span class="token string">"express"</span><span class="token punctuation">:</span> <span class="token string">"^4.16.2"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h5><a id="packagelockjson_15"></a>package-lock.json</h5>
<ul>
<li><code>package-lock.json</code> 中记录你所使用第三方包的<code>所有依赖选项</code>,  依赖包中也可能有依赖包 。 比如express 包 还依赖别的第三方包都会在这里记录下来。你可以打开express的package.json 就可以看到它的依赖！</li>
<li><code>package-lock.json</code> 还详细的记录了所有依赖的版本和下载地址。 可以高效的完成包安装</li>
<li><code>package-lock.json</code>  中主要目的就是为了锁定当前项目使用包的版本和它依赖的版本, 不至于项目每次安装都是最新的依赖包,导致版本不符项目出错</li>
</ul>
<p><code>npm v5</code> 以前是不会有 <code>package-lock.json</code> 这个文件的, 之后才加入。 当你安装包时, <code>npm</code>  自动会生成或者更新   <code>package-lock.json</code> 文件</p>
<pre><code class="prism language-json"><span class="token punctuation">{</span>
  <span class="token operator">...</span>
    <span class="token string">"art-template"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"4.12.2"</span><span class="token punctuation">,</span>
      <span class="token string">"resolved"</span><span class="token punctuation">:</span> <span class="token string">"http://registry.npm.taobao.org/art-template/download/art-template-4.12.2.tgz"</span><span class="token punctuation">,</span>
      <span class="token string">"integrity"</span><span class="token punctuation">:</span> <span class="token string">"sha1-pB64LZZ5u9HHPx+Dj/RujrBhJWU="</span><span class="token punctuation">,</span>
      <span class="token string">"requires"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"acorn"</span><span class="token punctuation">:</span> <span class="token string">"5.2.1"</span><span class="token punctuation">,</span>
        <span class="token string">"detect-node"</span><span class="token punctuation">:</span> <span class="token string">"2.0.3"</span><span class="token punctuation">,</span>
        <span class="token string">"escodegen"</span><span class="token punctuation">:</span> <span class="token string">"1.9.0"</span><span class="token punctuation">,</span>
        <span class="token string">"estraverse"</span><span class="token punctuation">:</span> <span class="token string">"4.2.0"</span><span class="token punctuation">,</span>
        <span class="token string">"html-minifier"</span><span class="token punctuation">:</span> <span class="token string">"3.5.6"</span><span class="token punctuation">,</span>
        <span class="token string">"is-keyword-js"</span><span class="token punctuation">:</span> <span class="token string">"1.0.3"</span><span class="token punctuation">,</span>
        <span class="token string">"js-tokens"</span><span class="token punctuation">:</span> <span class="token string">"3.0.2"</span><span class="token punctuation">,</span>
        <span class="token string">"merge-source-map"</span><span class="token punctuation">:</span> <span class="token string">"1.0.4"</span><span class="token punctuation">,</span>
        <span class="token string">"source-map"</span><span class="token punctuation">:</span> <span class="token string">"0.5.7"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
